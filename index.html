<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    <h1 id="titolo">Firebase</h1>
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">info</th>
          <th scope="col">#</th>
          <th scope="col">data</th>
          <th scope="col">location</th>
          <th scope="col">attivit√†</th>
          <th scope="col">dalle</th>
          <th scope="col">alle</th>
          <th scope="col">dalle</th>
          <th scope="col">alle</th>
          <th scope="col">n.</th>
          <th scope="col">trasporto</th>
          <th scope="col">note</th>
          <th scope="col">tot</th>
          <th scope="col">Fede</th>

        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>
   
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
      import { getDatabase, ref, get, set, onValue, child, update, remove} from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

      
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional

       const firebaseConfig = {
    apiKey: "AIzaSyDLJc4zQYsVpuXcn6ABioGPqwXO3Lf7Rh8",
    authDomain: "claps-a462f.firebaseapp.com",
    databaseURL: "https://claps-a462f-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "claps-a462f",
    storageBucket: "claps-a462f.appspot.com",
    messagingSenderId: "920842940003",
    appId: "1:920842940003:web:c50a01089213747eead256"
  };

    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);     
      const db = getDatabase(app);

       

        (function() {
          var table = document.getElementById("table")

          var titolo = document.getElementById("titolo")
          var body = document.getElementById("table-body")
          const readUser = ref(db,  'jobInfo/');
          onValue(readUser, (snapshot) => {
            while (body.lastElementChild) {
              body.removeChild(body.lastElementChild);
            }
       
            snapshot.forEach(emp => {
              let row = document.createElement('tr');
              const importOrder = ["info", "week_day", "date", "location", "activity", "dalle_am", "alle_am", "dalle_pm", "alle_pm", "quantity", "vehicle", "note", "total", "fede"];
              const sortByObject = importOrder.reduce((acc, key) => {
                          return {
                            ...acc,
                            [key]: emp.val()[key],
                          };
                        }, {});


              Object.values(sortByObject).forEach(text => {
                  let cell = document.createElement('td');
                  let textNode = document.createTextNode(text);
                  cell.appendChild(textNode);
                  row.appendChild(cell);
              })
              body.appendChild(row);
          });
          })
        })();
       
       

    </script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
</body>
</html>